# 小程序数据绑定

1. ## C(Create创建)

   1. Vue	
      1. 在配置对象中,添加data属性即可,属性值必须是函数
      2. **面试题:为什么Vue的data必须是一个函数?**
         1. **如果data是一个对象的话,此时由于暴露出去的相当于是组件的构造函数,那么该构造函数调用多次会生成多个实例对象,但是这些组件实例会共享同一个data对象,最终导致,一个组件修改数据,所有组件一起变化**
         2. **如果是函数形式,每个组件实例在创建的时候,都会得到一个全新的data对象,实现状态独享**
         3. **data函数其实就是一个工厂函数**
         4. **注意:.vue暴露出去的是构造函数,不是实例对象**
   2. React
      1. 在class结构中,添加state属性,属性值为对象
   3. 小程序
      1. 在配置对象中,添加data属性即可,属性值为对象
      2. **面试题:为什么小程序的data可以是对象?**
         1. **小程序会对data对象进行JSON深拷贝,所以每次得到的都是全新的对象**

2. ## R(Read读取)

   1. 在模版中读取
      1. Vue
         1. 在模版中使用{{}}(插值语法)进行状态数据读取
         2. **注意:Vue中只有想要把data状态作为文本显示才需要加插值语法**
      2. React
         1. 在render函数中,使用{this.state.msg}进行状态数据读取
      3. 小程序
         1. **在模版中使用{{}}(插值语法)进行状态数据读取**
         2. **注意:小程序中只要想在wxml中使用data数据就必须使用插值语法**
   2. 在js代码中读取
      1. Vue
         1. 语法:this.msg
         2. 流程:
            1. 触发数据代理(this.$data.msg)
            2. 触发数据劫持(defineProperty,get)
      2. React
         1. 语法:this.state.msg
         2. 注意:React没有数据代理,所以只能先找到state对象,在读取msg属性
      3. 小程序
         1. **语法:this.data.msg**
         2. **注意:小程序没有数据代理,所以只能先找到data对象,在读取msg属性**

3. ## U(Update更新)

   1. Vue
      1. 语法:this.msg=123
      2. 流程:
         1. 触发数据代理(this.$data.msg = 123)
         2. 触发数据劫持(defineProperty,set)
         3. 触发视图更新(dep.notify)
      3. **面试题:Vue更新数据是同步更新还是异步更新?**
         1.  **同步更新(编辑模式切换)**
      4. **面试题2:Vue更新视图是同步更新还是异步更新?**
         1. **异步更新(编辑模式切换)**
   2. React(持久化状态框架)
      1. 语法:this.setState({msg:123})
      2. **面试题:React更新数据是同步更新还是异步更新?**
         1. **有时可以,有时不行(有时候是同步更新,有时候是异步更新)**
            1. **同步更新**
               1. **定时器**
               2. **原生事件**
            2. **异步更新**
               1. **生命周期**
               2. **合成事件**
                  1. **注意:**
                     1. **区分合成事件很简单,用过事件名称就可以判断,如果是驼峰命名法,就是合成事件**
                     2. **合成事件是捡来的,原生事件是亲儿子,合成事件是绑定在#root元素身上的,所以触发速度更慢**
      3. 注意:React没有数据代理,也没有数据劫持,总结就是没有响应式效果
   3. **小程序(持久化状态框架)**
      1. **语法:this.setData({msg:123})**
      2. **面试题:小程序更新数据是同步更新还是异步更新?**
         1.  **同步更新**
      3. **面试题2:小程序更新视图是同步更新还是异步更新?**
         1. **异步更新**
      4. **注意:**
         1. **小程序没有数据代理,也没有数据劫持,总结就是没有响应式效果**
         2. **由于小程序是同步更新数据,所以只要读取data中的数据,一定能拿到最新值**
   4. **总结**
      1. **无论是Vue,React还是小程序,更新视图一定都是异步更新,类似于防抖效果(将多次视图更新合并为一次)**

4. ## D(Delete删除)

5. ## 数据流向

   1. Vue
      1. 单向数据流(伪双向)
      2. 双向数据绑定
         1. v-model可以实现当用户修改input框的内容,实现同步修改data中的数据的效果
         2. 双向数据绑定原理:
            1. 将data中的某个状态数据作为默认值显示在input框内部
            2. 当input框触发input事件,收集到用户输入的内容,并在回调函数中修改data中的数据
   2. React
      1. 单向数据流
   3. 小程序
      1. 单向数据流