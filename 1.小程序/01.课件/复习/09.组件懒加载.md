# 组件懒加载

1. 前言
   1. Vue项目打包成生产环境,会得到dist文件夹,内部文件结构:
      1. index.html
      2. index.js
      3. 也就是说index.js中具有所有页面的样式,图片,结构代码
   2. 假设:我们现在具有一个项目,该项目具有10个组件,每个组件大小1MB,总体积10MB
      1. 由于index.js中具有所有的代码,所以当前index.js文件大小10MB
      2. 用户使用项目的时候,只进入首页
      3. 资源加载流程:
         1. 用户在地址栏中输入url,通过url加载得到index.html文件
         2. 当浏览器解析index.html文件时,发现内部需要使用到index.js文件
         3. 再次请求index.js文件,由于index.js中具有整个项目的所有代码,所以虽然用户只看首页,但是其他页面的代码也请求回来了
            1. 问题:只使用到首页代码,但是请求了10个组件的代码,请求过多的无用代码,**占用带宽,提高了请求资源的时间,也提高了解析js代码的时间**
   3. ES6模块化
      1. import...from...
         1. 静态引入资源
         2. 在上线之前,webpack打包的时候,该语法会被覆盖掉,变成源文件代码
         3. 无论项目中具有多少个文件代码 ,最终都会被合并为一个文件
      2. import()
         1. 动态引入资源
         2. 在上线之前,webpack打包的时候,如果发现该语法,该语法会被保留,同时将被引入的文件,单独打包为一个js文件
         3. 只要被import函数引入的文件,都会成为独立文件
         4. 反观上面的案例:此时将除了首页以外的9个组件代码都是用import函数进行引入,就会一共得到10个js文件,此时index.js文件大小1MB
   4. 组件懒加载
      1. **优点:减少了首次请求的数据体量,加快了请求速度,以及解析代码速度,最终导致首屏渲染速度加快**
      2. 缺点:由于将index.js文件的代码进行了切割,所以index.js中没有其余组件的代码,也就是说后续页面需要展示的时候,都需要重新发送请求,找服务器获取资源并且解析最新代码,**导致后续页面展示速度变慢**
   5. 组件预加载

