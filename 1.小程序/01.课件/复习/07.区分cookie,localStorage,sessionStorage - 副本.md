# 区分cookie,localStorage,sessionStorage

1. 生命周期
   1. cookie
      1. 如果设置了最大超时时间maxAge,只要没有超过设置的maxAge,就会一直存在(前提是用户不主动删除)
      2. **如果没设置了最大超时时间maxAge,当用户关闭标签页或者关闭浏览器,都会导致cookie存储的数据丢失(会话级cookie)**
   2. localStorage
      1. 除非主动删除,否则localStorage存储的数据将永久存在
   3. sessionStorage
      1. 当用户关闭标签页或者关闭浏览器,都会导致sessionStorage存储的数据丢失
         1. 注意:刷新浏览器是不会丢失sessionStorage的
2. 存储位置
   1. cookie
      1. 如果设置了最大超时时间maxAge,存储于硬盘中
      2. 如果没设置了最大超时时间maxAge,存储于内存中
   2. localStorage
      1. 存储于硬盘中
   3. sessionStorage
      1. 存储于内存中
3. 存储大小
   1. cookie->4KB
   2. localStorage->大部分浏览器都是5MB,IE大约是3MB
   3. sessionStorage->大部分浏览器都是5MB,IE大约是3MB
4. 与服务器之间的关系
   1. cookie(被借用的本地存储)
      1. 服务器创建,浏览器存储
      2. 发送请求会自动携带
      3. 服务器是如何将cookie交给浏览器?
         1. 服务器通过给响应头添加属性**set-Cookie**,来实现向浏览器传递cookie数据
         2. **牛逼的是浏览器,浏览器会自动存储cookie**
      4. 浏览器是如何将cookie交给服务器?
         1. 浏览器通过给请求头添加属性**Cookie**,来实现向服务器传递cookie数据
   2. localStorage
      1. 与服务器不熟
      2. 他是html5新特性,专门给前端开发人员使用的浏览器本地存储
   3. sessionStorage
      1. 与服务器不熟
      2. 他是html5新特性,专门给前端开发人员使用的浏览器本地存储
5. 作用范围
   1. cookie
      1. 服务器可以通过domain+path属性对每个cookie的读取范围作出限制,可以获取上级cookie,不能获取下级cookie,path如果写入某个路由地址,那么该cookie只能在该路由地址以及他的子路由中访问
   2. localStorage
      1. 跟域名有关,如果域名相同哪怕是跨标签页也能使用
   3. sessionStorage
      1. 跟域名有关,而且不能跨标签页读取
6. 三者的优缺点对比
   1. cookie
      1. 发送请求会自动携带(导致每次请求都会携带大量的无用数据)
      2. 体积较小,最多只能存4KB
      3. 用户可以决定是否使用Cookie(很可能导致我们部分功能失效)
      4. 服务器可以控制浏览器对Cookie的修改和查看
   2. localStorage
      1. 发送请求是否携带,可以由开发者自己决定
      2. 体积大,能存储更多数据
      3. 用户,服务器都无法控制localStorage
   3. sessionStorage
      1. 发送请求是否携带,可以由开发者自己决定
      2. 体积大,能存储更多数据
      3. 用户,服务器都无法控制sessionStorage
      4. 相比于localStorage,sessionStorage的性能更好
7. **面试题:如何实现跨标签页的通信?**
   1. **通过localStorage实现**
      1. **流程:**
         1. **在需要接收数据的页面(B页面),给window绑定storage事件**
         2. **在需要发送数据的页面(A页面),使用localStorage同步存入数据**
         3. **这时,B页面的storage回调函数就会被触发,事件对象event中可以得到当前本次存储的相关信息**